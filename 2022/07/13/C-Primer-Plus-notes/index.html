

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Jason_Zhu">
  <meta name="keywords" content="">
  
    <meta name="description" content="第一章：初识C语言C的历史和特性C语言的起源：Dennis Ritch 和 Ken Thompson 在开发UNIX操作系统时设计了C语言（基于B语言进行设计）。 C的高效性：C语言具有通常是汇编语言才具有的微调控制能力，可以根据具体情况微调程序以获得最大运行速度或最有效地使用内存。 C的可移植性：许多计算机体系结构都可以使用C编译器（C编译器是把C代码转换成计算机内部指令的程序）。  由于C语言">
<meta property="og:type" content="article">
<meta property="og:title" content="C Primer Plus notes">
<meta property="og:url" content="http://example.com/2022/07/13/C-Primer-Plus-notes/index.html">
<meta property="og:site_name" content="Jason_Zhu&#39;s Blog">
<meta property="og:description" content="第一章：初识C语言C的历史和特性C语言的起源：Dennis Ritch 和 Ken Thompson 在开发UNIX操作系统时设计了C语言（基于B语言进行设计）。 C的高效性：C语言具有通常是汇编语言才具有的微调控制能力，可以根据具体情况微调程序以获得最大运行速度或最有效地使用内存。 C的可移植性：许多计算机体系结构都可以使用C编译器（C编译器是把C代码转换成计算机内部指令的程序）。  由于C语言">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="e:/backup/myblog/C/C%20primer%20plus/png汇总/chapter2-1.png">
<meta property="article:published_time" content="2022-07-13T07:16:31.000Z">
<meta property="article:modified_time" content="2022-07-13T07:17:27.799Z">
<meta property="article:author" content="Jason_Zhu">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="e:/backup/myblog/C/C%20primer%20plus/png汇总/chapter2-1.png">
  
  
  
  <title>C Primer Plus notes - Jason_Zhu&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.2","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                Home
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                Archives
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                Categories
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                Tags
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                About
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="C Primer Plus notes"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-07-13 15:16" pubdate>
          July 13, 2022 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          undefined words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          NaN mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">C Primer Plus notes</h1>
            
            
              <div class="markdown-body">
                
                <h3 id="第一章：初识C语言"><a href="#第一章：初识C语言" class="headerlink" title="第一章：初识C语言"></a>第一章：初识C语言</h3><h4 id="C的历史和特性"><a href="#C的历史和特性" class="headerlink" title="C的历史和特性"></a>C的历史和特性</h4><p><strong>C语言的起源</strong>：<em>Dennis Ritch</em> 和 <em>Ken Thompson</em> 在开发UNIX操作系统时设计了C语言（基于B语言进行设计）。</p>
<p><strong>C的高效性</strong>：C语言具有通常是汇编语言才具有的微调控制能力，可以根据具体情况微调程序以获得最大运行速度或最有效地使用内存。</p>
<p><strong>C的可移植性</strong>：许多计算机体系结构都可以使用C编译器（C编译器是把C代码转换成计算机内部指令的程序）。</p>
<blockquote>
<p>由于C语言和UNIX关系密切，UNIX系统通常会将C编译器作为软件包的一部分。安装Linux时，通常也会安装C编译器。供个人计算机使用的C编译器很多，运行各种版本的Windows和Macintosh的PC都能找到合适的C编译器。</p>
</blockquote>
<p><strong>计算机能做什么</strong>：现代计算机由多种部件构成。<em>中央处理单元（CPU）</em>承担大部分运算工作。<em>随机存取内存（RAM）</em>是存储程序和文件的工作区；<em>永久内存存储设备（包括机械硬盘和固态硬盘等）</em>即使在关闭计算机后，也不会丢失之前存储的程序和文件。还有各种外围设备提供人与计算机之间的交互。<strong>CPU负责处理程序。</strong></p>
<blockquote>
<p>CPU的工作非常简单，它从内存中获取并执行一条指令，然后再从内存中获取并执行下一条指令，诸如此类（CPU能以惊人的速度从事枯燥的工作）。且CPU能理解的指令有限（这些指令的集合叫作指令集）<em>这里我在CA学的指令集（ISA）就是RISC-V</em> 。</p>
</blockquote>
<p><strong>高级计算机语言和编译器</strong>：高级编程语言（如C）使我们不必再用数字码&#x2F;机器码来表示指令，这样使用的指令能更贴近你如何想这个问题。这种高级语言人类可以理解，但对于计算机就是一堆无法理解的无用数据，所以编译器派上了用场，即将高级语言程序翻译成计算机能理解的机器语言指令集的程序。</p>
<blockquote>
<p>对于同一个高级语言程序，可以使用相应的编译器翻译成不同CPU使用的机器语言。</p>
</blockquote>
<h4 id="编写程序的步骤"><a href="#编写程序的步骤" class="headerlink" title="编写程序的步骤"></a>编写程序的步骤</h4><ol>
<li>定义程序的目标</li>
<li>设计程序</li>
<li>编写代码</li>
<li>编译</li>
<li>运行程序</li>
<li>测试和调试程序</li>
<li>维护和修改程序</li>
</ol>
<h4 id="编译器和链接器的一些知识"><a href="#编译器和链接器的一些知识" class="headerlink" title="编译器和链接器的一些知识"></a>编译器和链接器的一些知识</h4><p>编译就是将源代码如（.c）翻译成机器码。C编译采取分而治之的方法，即分开编译模块，最后用链接器合并已经编译好的模块。这样的好处就是如果只更改某个模块的话，不必因此重新编译其他模块。</p>
<p>对于我们编写的源代码，编译完成仅仅产生目标代码文件（.o），尽管由机器码组成，但是并不是完整的程序。一是缺少启动代码，二是缺少调用的库函数的代码。这些就体现了C编译器的分而治之，像一些库代码会预编译，然后最后由链接器将目标代码、系统的标准启动代码和库代码着3部分合并称为一个文件，这便是可执行文件(.exe)。</p>
<h4 id="C标准"><a href="#C标准" class="headerlink" title="C标准"></a>C标准</h4><p>C89&#x2F;C90 -&gt; C11 -&gt; C17 -&gt;……</p>
<p><em>C标准制定遵循C精神</em></p>
<ul>
<li><p>信任程序员</p>
</li>
<li><p>不要妨碍程序员做需要做的事</p>
</li>
<li><p>保持语言精炼简单</p>
</li>
<li><p>只提供一种方法执行一项操作</p>
</li>
<li><p>让程序运行更快，即使不能保证其可移植性</p>
<blockquote>
<p>关于最后一点，标准委员会的用意是：作为实现，应该针对目标计算机来定义最合适的某特定操作，而不是强加一个抽象、统一的定义。</p>
</blockquote>
</li>
</ul>
<h4 id="本章小结"><a href="#本章小结" class="headerlink" title="本章小结"></a>本章小结</h4><blockquote>
<p>​	C是强大而简洁的编程语言。它之所以流行，在于自身提供大量的实用编程工具，能很好地控制硬件。而且，与大多数其他程序相比，C程序更容易从一个系统移植到另一个系统。</p>
<p>​	C是编译型语言。C编译器和链接器是把C语言源代码转换成可执行代码的程序。</p>
<p>​	用C语言编程<strong>可能费力、困难，让你感到沮丧</strong>，但是它也可以<strong>激发你的兴趣，让你兴奋、满意</strong>。我们希望你在愉快的学习过程中爱上C。</p>
</blockquote>
<hr>
<h3 id="第二章：C语言概述"><a href="#第二章：C语言概述" class="headerlink" title="第二章：C语言概述"></a>第二章：C语言概述</h3><h4 id="实例分析与引入"><a href="#实例分析与引入" class="headerlink" title="实例分析与引入"></a>实例分析与引入</h4><p><code>first.c</code>实例</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># <span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span>&#123;</span><br><span class="line">    <span class="type">int</span> num;</span><br><span class="line">    num = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;I am a simple &quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;computer.\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;My favorite number is %d because it is first.\n&quot;</span> ,num);</span><br><span class="line"></span><br><span class="line">    getchar();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="E:\backup\myblog\C\C primer plus\png汇总\chapter2-1.png" srcset="/img/loading.gif" lazyload alt="chapter2-1" style="zoom:67%;" />

<h5 id="快速概要"><a href="#快速概要" class="headerlink" title="快速概要"></a><strong>快速概要</strong></h5><p><code>#include&lt;stdio.h&gt;</code>：该行告诉编译器将 <code>stdio.h</code> 中的内容包含在当前程序中。 <code>stdio.h</code> 是 C 编译器软件包的标准部分，它提供键盘输入和屏幕输出的支持。</p>
<p><code>/* */</code> ：注释能提高程序的可读性，编译器会忽略它们。</p>
<h5 id="程序细节"><a href="#程序细节" class="headerlink" title="程序细节"></a><strong>程序细节</strong></h5><h6 id="include指令和头文件"><a href="#include指令和头文件" class="headerlink" title="#include指令和头文件"></a><strong><code>#include</code>指令和头文件</strong></h6><p><code>#include&lt;stdio.h&gt;</code>：是一条C预处理器指令（通常，C编译器在编译前会对源代码做一些准备工作，即预处理 - prepocessing）</p>
<blockquote>
<p>通常，在C程序顶部的信息集合被称为头文件（header），比如 <code>stdio.h</code> 就是标准输入&#x2F;输出头文件，而所有C编译器软件包都提供 <code>stdio.h</code> 文件。</p>
</blockquote>
<blockquote>
<p>ANSI&#x2F;ISO C 规定了C编译器必须提供哪些头文件。</p>
</blockquote>
<h6 id="main-函数"><a href="#main-函数" class="headerlink" title="main()函数"></a><strong><code>main()</code>函数</strong></h6><p><code>main()</code>：除了<code>main()</code>函数，函数可以被任意命名，而且<code>main()</code>函数必须是开始的函数。</p>
<blockquote>
<p>如果浏览旧式的C代码，会发现程序以如下形式开始：</p>
<p><code>main()</code></p>
<p>C90 勉强接收这种形式，但是 C99 和 C11 标准不允许这样写。因此，即使你的编译器允许，也不要这样写。</p>
</blockquote>
<h6 id="注释"><a href="#注释" class="headerlink" title="注释"></a><strong>注释</strong></h6><blockquote>
<p>C99新增了另一种风格的注释，普遍用于C++和Java。这种新风格使用&#x2F;&#x2F;符号创建注释，仅限于单行。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 凑豆配腐掳，美食界中的博主。不管是腥还是臭，到我嘴里就是肉。奥利给，干了兄弟们！</span></span><br></pre></td></tr></table></figure>



<h6 id="花括号、函数体和块"><a href="#花括号、函数体和块" class="headerlink" title="花括号、函数体和块"></a><strong>花括号、函数体和块</strong></h6><p>{</p>
<p>​		…</p>
<p>}</p>
<h6 id="声明"><a href="#声明" class="headerlink" title="声明"></a><strong>声明</strong></h6><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> num;</span><br></pre></td></tr></table></figure>

<p><em><code>int</code> 是C语言的一个关键字（keyword），表示一种基本的C语言数据类型。</em></p>
<p><em><code>num</code> 是一个标识符（identifier），也就是一个变量、函数或其他实体的名称。</em></p>
<p><strong>因此，声明把特定标识符与计算机内存中的特定位置联系起来，同时也确定了存储在某位置的信息类型或数据类型。</strong></p>
<p>在C语言中，所有变量都必须先声明后使用。</p>
<p><strong>数据类型</strong></p>
<p>我们通过声明，让计算机能够正确地存储、读取和解释数据。在下一章将详细介绍C语言中的各种数据结构。</p>
<p><strong>命名</strong></p>
<blockquote>
<p>​	C99 和 C11 允许使用更长的标识符名，但是编译器只识别前63个字符。对于外部标识符（参阅第12章），只允许使用31个字符。（以前 C90 只允许6个字符，这是一个很大的进步。旧式编译器通常只允许使用8个字符。）实际上，你可以使用更长的字符，但是编译器会忽略超出的字符。</p>
<p>​	对于超出63个字符之外不同，而前63个字符都相同的两个标识符，标准并未定义在这种情况下会发生什么。</p>
</blockquote>
<p>命名使用小写字母、大写字母、数字和下划线（_）来命名，而且名称的第一个字符必须是字母或下划线，不能是数字。C语言名称区分大小写。</p>
<p><em>操作系统和C库经常使用一个或两个下划线字符开始的标识符（如 _kcab）</em>，因此最好避免在自己的程序中使用这种名称。</p>
<p><strong>声明变量的四个理由</strong></p>
<ol>
<li>汇总变量，提高程序可读性</li>
<li>便于在编写程序前做计划</li>
<li>有助于发现隐藏在程序中的小错误，如变量名拼写错误</li>
<li>不声明，C程序将无法通过编译</li>
</ol>
<h6 id="赋值"><a href="#赋值" class="headerlink" title="赋值"></a>赋值</h6><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">num = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<p>👉赋值到👈，把值存储在之前声明时，编译器在计算机内存中为变量 <code>num</code> 预留的空间。</p>
<h6 id="printf-函数"><a href="#printf-函数" class="headerlink" title="printf() 函数"></a><code>printf()</code> 函数</h6><p>C语言的一个标准函数，声明于<code>stdio.h</code>中。</p>
<p>运行到<code>printf()</code>时，程序控制权转给已命名的函数，即<code>printf()</code>，函数执行结束后，控制权返回至<em>主调函数</em>（calling function），该例中为<code>main()</code></p>
<p>对于<code>\n</code>这种换行符（newline character），为啥不直接用<code>Enter</code>呢？</p>
<p>因为这是在编辑器中按<code>Enter</code>，编辑器就会以为这是直接的命令，在我们编辑代码的时候就换行了，而我们实际想要的是输出时换行。</p>
<blockquote>
<p>​	换行符时一个转义序列（escape sequence）。转义序列用于代表难以标识或无法输入的字符。每个转义序列都以反斜杠字符（\）开始。我们在第3章中再来讨论相关内容。</p>
</blockquote>
<p>关于<code>printf()</code>中<code>%d</code>，它相当于是个占位符，其作用是指明输出<code>num</code>的位置。在第3章会详细介绍相关内容。</p>
<h6 id="return语句"><a href="#return语句" class="headerlink" title="return语句"></a><code>return</code>语句</h6><p>​	事实上，如果遗漏<code>main()</code>函数中的<code>return 0;</code>，在程序运行到语句块结束即（<code>&#125;</code>）时也会返回0。但我们应该养成良好的代码习惯，可以看作是统一代码风格。</p>
<p>​	但对于某些操作系统（包括 Linux 和 UNIX），return语句有实际的用途。第11章将详细讨论。</p>
<p><del>不得不说，这按照书上每个小章节总结实在时太费劲了。</del></p>
<p>接下来，即从<code>2.3</code>开始，我都只写下之前不理解或理解得不清楚的重点部分。</p>
<h5 id="提高程序可读性的技巧"><a href="#提高程序可读性的技巧" class="headerlink" title="提高程序可读性的技巧"></a>提高程序可读性的技巧</h5><ol>
<li>选择有意义的函数名</li>
<li>写注释</li>
<li>在函数中用空行分隔概念上的多个部分（示例代码就是这样）</li>
<li>每个语句各占一行</li>
</ol>
<h5 id="进一步使用C"><a href="#进一步使用C" class="headerlink" title="进一步使用C"></a>进一步使用C</h5><h6 id="多条声明"><a href="#多条声明" class="headerlink" title="多条声明"></a>多条声明</h6><p>程序可以在一条声明中进行多个同类型变量的声明，记住变量要用逗号隔开。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> feet, fathoms;</span><br></pre></td></tr></table></figure>



<h6 id="打印多个值"><a href="#打印多个值" class="headerlink" title="打印多个值"></a>打印多个值</h6><p><code>printf()</code>中用俩占位符，后面的变量用逗号隔开。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;There are %d feet in %d fathoms!\n&quot;</span>, feet, fathoms);</span><br></pre></td></tr></table></figure>

<p><em>这个用逗号隔开各个实参，确实符合正常函数的调用。</em></p>
<h6 id="多个函数"><a href="#多个函数" class="headerlink" title="多个函数"></a>多个函数</h6><blockquote>
<p>C 标准建议，要为程序中用到的所有函数提供函数原型（prototype）。标准include文件为标准库函数提供了函数原型。之后如第9章将会更详细全面地介绍函数。</p>
</blockquote>
<h6 id="调试程序"><a href="#调试程序" class="headerlink" title="调试程序"></a>调试程序</h6><p><strong>语法错误</strong></p>
<blockquote>
<p>编译器也会有出错的时候。也许某处隐藏的语法错误会导致编译器误判。</p>
<p>编译器另一个常见的毛病是，报错的位置比真正的错误位置滞后一行。例如，编译器在编译下一行时才会发现上一行缺少分号。因此，如果编译器报错某行缺少分号，请检查上一行。</p>
</blockquote>
<p><strong>语义错误</strong></p>
<p><em>就是自己编写有问题，实际代码与意图不符合。</em></p>
<p><em>当然这也是debug很常见的问题，这个时候就要把自己想象成计算机，跟着程序的步骤一步一步地执行。</em></p>
<p><strong>程序状态</strong></p>
<p>（program state）：是在程序地执行过程中，某给定点上所有变量值的集合。它是计算机当前状态的一个快照。</p>
<h6 id="关键概念"><a href="#关键概念" class="headerlink" title="关键概念"></a>关键概念</h6><blockquote>
<p>由于编译器不具有真正的智能，所以你必须用编译器能理解的术语表达你的意图，这些术语就是C语言标准规定的形式规则（尽管有些约束，但总比直接用机器语言方便的多）。</p>
</blockquote>
<hr>
<h3 id="第三章：数据和C"><a href="#第三章：数据和C" class="headerlink" title="第三章：数据和C"></a>第三章：数据和C</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span>&#123;</span><br><span class="line">    <span class="type">float</span> weight;</span><br><span class="line">    <span class="type">float</span> value;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Are you wroth your weight in platinum?\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Let&#x27;s check it out!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Please enter your weight in pounds: &quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%f&quot;</span>, &amp;weight);	<span class="comment">// 假设输入156</span></span><br><span class="line">    value = <span class="number">1700.0</span> * weight *<span class="number">14.5833</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Your weight in platinum is worth $%.2f\n&quot;</span>, value);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;You are easily worth that! If platinum prices drop, \n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;eat more to maintain your value!\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    getchar();</span><br><span class="line">    getchar();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>key point:</strong></p>
<p>​	getchar()函数读取下一个输入字符，因此程序会等待用户输入。在这种情况下，键入156并按下Enter（或Return）键（发送一个换行符），然后scnaf()读取键入的数字，第一个getchar()读取换行符，第二个getchar()让程序暂停，等待输入。</p>
</blockquote>
<h5 id="变量与常量数据"><a href="#变量与常量数据" class="headerlink" title="变量与常量数据"></a>变量与常量数据</h5><blockquote>
<p>要完成一些列任务，程序需要使用数据，即承载信息的数字和字符。有些数据类型在程序使用之前就已经预设好了，在整个程序的运行过程中没有变化，<strong>这些称为常量</strong>。其他数据类型在程序运行期间可能会被改变或者赋值，<strong>这些称为变量</strong>。</p>
</blockquote>
<h5 id="数据：数据类型关键字"><a href="#数据：数据类型关键字" class="headerlink" title="数据：数据类型关键字"></a>数据：数据类型关键字</h5><p>数据既可以是数字也可以是字符，而C通过识别一些基本的<em>数据类型</em>来区分和使用这些不同的数据类型</p>
<p><em>如果数据是常量，编译器一般通过用户书写的形式来识别类型；但对于变量而言，要在声明的时候指定其类型。而这就要用到数据类型关键字了。</em></p>
<table>
<thead>
<tr>
<th>最初K&amp;R给出的关键字</th>
<th>C90标准添加的关键字</th>
<th>C99标准添加的关键字</th>
</tr>
</thead>
<tbody><tr>
<td>int</td>
<td>signed</td>
<td>_Bool</td>
</tr>
<tr>
<td>long</td>
<td>void</td>
<td>_Complex</td>
</tr>
<tr>
<td>short</td>
<td></td>
<td>_Imaginary</td>
</tr>
<tr>
<td>unsigned</td>
<td></td>
<td></td>
</tr>
<tr>
<td>char</td>
<td></td>
<td></td>
</tr>
<tr>
<td>float</td>
<td></td>
<td></td>
</tr>
<tr>
<td>double</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<blockquote>
<p>关于字（word）是设计计算机时给定的自然存储单位，这个和具体计算机挂钩，但总的来说，计算机的字长越长，其数据转移越快，允许的内存访问也更多。</p>
</blockquote>
<h6 id="整数与浮点数"><a href="#整数与浮点数" class="headerlink" title="整数与浮点数"></a>整数与浮点数</h6><blockquote>
<p>对于我们而言，整数和浮点数的区别是它们的<strong>书写方式</strong>不同。对计算机而言，他们的区别是<strong>存储方式</strong>不同。</p>
</blockquote>
<ol>
<li>整数<ul>
<li>计算机以二进制数字存储整数</li>
</ul>
</li>
<li>浮点数 （注意，在一个值后面加上一个小数点，该值即称为一个浮点值。）<ul>
<li>计算机把浮点数分成小数部分和指数部分来表示，而且分开存储这两部分（to be covered in 15章）</li>
</ul>
</li>
</ol>
<p><em><strong>两者的主要区别：</strong></em></p>
<ul>
<li>整数没有小数部分，浮点数有小数部分。</li>
<li>浮点数可以表示的范围比整数大。</li>
<li>对于一些算数运算（如，两个很大的数相减），浮点数损失的精度更多</li>
<li>因为在任何区间内（如，1.0到2.0之间）都存在无穷多个实数，所以计算机的浮点数不能表示区间内的所有值。浮点数通常只是实际值的近似值。</li>
<li>过去，浮点运算比整数运算慢。不过现在许多CPU都包含浮点处理器，缩小了速度上的差距。</li>
</ul>
<h5 id="C语言基本数据类型"><a href="#C语言基本数据类型" class="headerlink" title="C语言基本数据类型"></a>C语言基本数据类型</h5><h6 id="int类型"><a href="#int类型" class="headerlink" title="int类型"></a>int类型</h6><p><em>一般而言，存储一个int要占用一个机器字长（word）。</em></p>
<p>即如<code>int eggs;</code>一样声明，效果就是为一个int大小的变量赋予名称并分配内存空间。这创建了变量，但是并没有给它们提供值。而变量在程序中获取值有以下的方法：</p>
<ol>
<li><p>赋值：<code>eggs = 2;</code></p>
</li>
<li><p>通过函数如scanf（）获得值</p>
</li>
<li><p>初始化变量：为变量赋一个初始值</p>
<p>在C中，初始化可以在声明中直接完成</p>
<blockquote>
<p>key point</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> hogs = <span class="number">21</span>;</span><br><span class="line"><span class="type">int</span> cows = <span class="number">32</span>, goats = <span class="number">14</span>;</span><br><span class="line"><span class="type">int</span> dogs, cats = <span class="number">94</span>; <span class="comment">// 有效但这种格式很糟糕，它仅仅初始化了cats，dogs仅仅是被声明了</span></span><br></pre></td></tr></table></figure>

<p><strong>所以最好不要把初始化的变量和未初始化的变量放在同一条声明中。</strong></p>
</blockquote>
</li>
</ol>
<blockquote>
<p>C语言大多数整形常量视为int类型，但非常大的整数除外。</p>
</blockquote>
<p><strong>八进制和十六进制</strong></p>
<p>​	通常，C语言都假定整型常量是十进制数。然而许多程序员很喜欢使用八进制和十六进制数。但是计算机如何知道10000是十进制、十六进制还是二进制。</p>
<blockquote>
<p>在C语言中用特定的前缀表示使用那种进制。</p>
<p>0x或0X前缀表示十六进制</p>
<p>0前缀表示八进制</p>
<p><strong>要清楚，使用不同的进制数是为了方便，并不会影响数被存储的方式。也就是说，无论把数字写成16、020还是0x10，计算机存储该数的方式都相同，因为计算机内部都以二进制进行编码。</strong></p>
</blockquote>
<p><strong>用printf（）显示八进制和十六进制</strong></p>
<table>
<thead>
<tr>
<th>占位符</th>
<th>进制</th>
</tr>
</thead>
<tbody><tr>
<td>%d</td>
<td>以十进制显示</td>
</tr>
<tr>
<td>%o</td>
<td>以八进制显示</td>
</tr>
<tr>
<td>%x</td>
<td>以十六进制显示</td>
</tr>
<tr>
<td>%#o</td>
<td>以八进制显示，并显示前缀0</td>
</tr>
<tr>
<td>%#x</td>
<td>以十六进制显示，并显示前缀0x</td>
</tr>
<tr>
<td>%#X</td>
<td>以十六进制显示，并显示前缀0X</td>
</tr>
</tbody></table>
<blockquote>
<p><strong>提示 匹配printf()说明符的类型</strong></p>
<p>​	在使用printf()函数时，切记检查每个待打印值都有对应的转换说明，还要检查转换说明的类型是否与待打印值得类型相匹配。</p>
</blockquote>
<h6 id="使用字符：char类型"><a href="#使用字符：char类型" class="headerlink" title="使用字符：char类型"></a>使用字符：char类型</h6><p><em>char类型用于存储字符（如，字母或标点符号），但从技术层面看，char是整数类型。因为char类型实际上存储的是  <strong>整数</strong> 而不是字符。</em></p>
<p>计算机使用数字编码来处理字符，即用特点得整数表示特定的字符。</p>
<p>美国最常用的编码是ASCII编码，本书也使用此编码。</p>
<blockquote>
<p>标准ASCII码的范围是0~127，只用7位二进制数就能表示。通常char类型被定义为8位的存储单元，因此容纳标准ASCII码绰绰有余。</p>
</blockquote>
<blockquote>
<p>许多字符集都超过了127，甚至多于255。例如，日本汉字（kanji）字符集。商用的统一码（Unicode）创建了一个能表示世界范围内多种字符集的系统，目前包含的字符已超过110000个。</p>
</blockquote>
<p>char的声明和int一样</p>
<p>char类型的初始化要用到字符常量(character constant)：用单引号括起来的单个字符就被称为字符常量。</p>
<p>我们并不必背下ASCII码，用计算机语言可以轻松做到。因为编译器一旦发现’A’（字符常量），就会将其转换成相应的代码值。</p>
<p><strong>注意是单引号，双引号就是字符串了（第四章会讲字符串）</strong></p>
<p><strong>非打印字符</strong></p>
<blockquote>
<p>单引号只适用于字符、数字和标点符号，浏览ASCII表会发现，有些ASCII字符打印不出来。例如一些代表行为的字符（如：退格、换行、终端响铃或蜂鸣）。C语言提供了3种方法来表示这些字符：</p>
</blockquote>
<ol>
<li>前面介绍过——使用ASCII码。例如，蜂鸣字符的ASCII值是7，因此可以这样写：</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> beep = <span class="number">7</span>;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>使用特殊的符号序列来表示一些特殊的字符。这些符号序列叫作转义序列(escape sequence)。如下表</li>
</ol>
<table>
<thead>
<tr>
<th>转义序列</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>\a</td>
<td>警报（ANSI C）</td>
</tr>
<tr>
<td>\b</td>
<td>退格</td>
</tr>
<tr>
<td>\f</td>
<td>换页</td>
</tr>
<tr>
<td>\n</td>
<td>换行</td>
</tr>
<tr>
<td>\r</td>
<td>回车</td>
</tr>
<tr>
<td>\t</td>
<td>水平制表符</td>
</tr>
<tr>
<td>\v</td>
<td>垂直制表符</td>
</tr>
<tr>
<td>\\</td>
<td>反斜杠(\)</td>
</tr>
<tr>
<td>\‘</td>
<td>单引号</td>
</tr>
<tr>
<td>\‘’</td>
<td>双引号</td>
</tr>
<tr>
<td>\?</td>
<td>问号</td>
</tr>
<tr>
<td>\0oo</td>
<td>八进制数值（oo必须是有效的八进制数）</td>
</tr>
<tr>
<td>\xhh</td>
<td>十六进制值（hh必须是有效的十六进制数）</td>
</tr>
</tbody></table>
<blockquote>
<p>使用ASCII码时，注意数字和数字字符的区别。如<strong>使用ASCII码是52，’4‘表示字符4，而不是数值4。</strong></p>
</blockquote>
<p>那么可能就会有个问题了，为什么用printf的时候转义序列和普通字符没用单引号括起来？</p>
<blockquote>
<p>无论是普通字符还是转义序列，只要是双引号括起来的字符集合，就无需用单引号括起来。双引号的字符集合叫做字符串（详见第4章）</p>
</blockquote>
<p><strong>打印字符</strong></p>
<p>printf()函数用%c指明待打印的字符。前面介绍过，一个字符变量实际上被存储为1个字节的整数值。因此，如果用%d转换说明打印 char 类型变量的值，打印的是一个整数。而 %c 转换说明告诉printf（）打印该整数值<strong>对应的字符</strong>。</p>
<blockquote>
<p>printf（）函数中的转换说明决定了数据的<strong>显示方式</strong>，而不是数据的存储方式。</p>
</blockquote>
<h6 id="Bool类型"><a href="#Bool类型" class="headerlink" title="_Bool类型"></a>_Bool类型</h6><p>C99标准添加了_Bool类型，用于表示布尔值，即逻辑值 true（1） 和 false（0）。原则上仅仅占用一位存储空间。</p>
<h6 id="可移植类型：stdint-h和inttypes-h"><a href="#可移植类型：stdint-h和inttypes-h" class="headerlink" title="可移植类型：stdint.h和inttypes.h"></a>可移植类型：<code>stdint.h</code>和<code>inttypes.h</code></h6><p>C99新增了两个头文件 <code>stdint.h</code> 和 <code>inttypes.h</code>，以确保C语言的类型在各系统中的功能相同。</p>
<h6 id="float、double-和-long-double"><a href="#float、double-和-long-double" class="headerlink" title="float、double  和 long double"></a><code>float</code>、<code>double </code> 和 <code>long double</code></h6><p><strong>对于浮点型常量：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">-1.56E+12</span></span><br><span class="line"><span class="number">2.87e-3</span></span><br><span class="line"><span class="comment">// 两个有效的小数表示，其中后一个有符号数时表示10的指数</span></span><br></pre></td></tr></table></figure>



<p>默认情况下，编译器假定浮点型常量是double类型的精度。</p>
<p>而在浮点数后面加上 f 或 F 后缀可覆盖默认设置，编译器会将浮点型常量看作float类型。使用 l 或 L 后缀舍得数字称为 <code>long double</code> 的类型。</p>
<p><strong>打印浮点值</strong></p>
<p>printf()函数使用%f转换说明打印十进制计数法的float和double类型浮点数。</p>
<p>用 %e 打印指数计数法的浮点数。</p>
<p>如果系统支持十六进制格式的浮点数，可用a和A分别代替e和E。</p>
<p>打印long double类型要使用 %Lf、%Le或La转换说明。</p>
<p><strong>浮点数的上溢和下溢</strong></p>
<p>等用到的时候再查</p>
<h6 id="复数和虚数类型"><a href="#复数和虚数类型" class="headerlink" title="复数和虚数类型"></a>复数和虚数类型</h6><p>用到再查</p>
<h6 id="其他类型"><a href="#其他类型" class="headerlink" title="其他类型"></a>其他类型</h6><p>上面已经说完了C语言的所有基本数据类型。而C语言还有一些从基本类型衍生的其他类型，包括数组、指针、结构和联合等等。</p>
<h6 id="类型大小"><a href="#类型大小" class="headerlink" title="类型大小"></a>类型大小</h6><p>实例程序：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// C99 为类型大小提供 %zd 转换说明（而这实际上是size_t类型）</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Type int has a size of %zd bytes.\n&quot;</span>, <span class="keyword">sizeof</span>(<span class="type">int</span>)); <span class="comment">// 4</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Type char has a size of %zd bytes.\n&quot;</span>, <span class="keyword">sizeof</span>(<span class="type">char</span>)); <span class="comment">// 1</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Type long has a size of %zd bytes.\n&quot;</span>, <span class="keyword">sizeof</span>(<span class="type">long</span>)); <span class="comment">// 8</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Type long long has a size of %zd bytes.\n&quot;</span>, <span class="keyword">sizeof</span>(<span class="type">long</span> <span class="type">long</span>)); <span class="comment">// 8</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Type double has a size of %zd bytes.\n&quot;</span>, <span class="keyword">sizeof</span>(<span class="type">double</span>)); <span class="comment">// 8</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Type long double has a size of %zd bytes.\n&quot;</span>, <span class="keyword">sizeof</span>(<span class="type">long</span> <span class="type">double</span>)); <span class="comment">// 16</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h5 id="使用数据类型"><a href="#使用数据类型" class="headerlink" title="使用数据类型"></a>使用数据类型</h5><blockquote>
<p>C 再检查类型匹配方面不太严格，C 编译器甚至允许二次初始化，但在激活了较高级别的警告时，会给出警告。最好不要养成这样的习惯。</p>
<p>把一个类型的数值初始化给不同类型的变量时，编译器会把值转换成与变量匹配的类型，这将导致部分数据丢失。下面是一个例子</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> cost = <span class="number">12.99</span>; <span class="comment">// 使用double类型的值初始化int类型的变量</span></span><br><span class="line"><span class="type">float</span> pi = <span class="number">3.1415926535</span>; <span class="comment">// 使用double类型的值初始化float类型的变量</span></span><br></pre></td></tr></table></figure>

<p>这实际上会导致如<code>cost = 12</code>（因为C编译器把浮点数转换成整数时，会直接丢弃小数部分，而不进行四舍五入。）</p>
<p>第二个声明则会损失一些精度，因为C只保证了float类型前6位的精度。</p>
<h5 id="参数和陷阱"><a href="#参数和陷阱" class="headerlink" title="参数和陷阱"></a>参数和陷阱</h5><blockquote>
<p>printf（）和scanf（）函数与一般函数不同，它们的参数个数是可变的。</p>
<p>printf（）和scanf（）函数用第1个参数表明后续有多少个参数，即第1个字符串种的转换说明与后面的参数一一对应。</p>
</blockquote>
<p><strong>这两个函数的参数个数或类型不匹配可能不会被编译器检测出来，但结果一定会出大问题。</strong></p>
<h5 id="转义序列实例"><a href="#转义序列实例" class="headerlink" title="转义序列实例"></a>转义序列实例</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span>&#123;</span><br><span class="line">    <span class="type">float</span> salary;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\aEnter your desired monthly salary:&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot; $_______\b\b\b\b\b\b\b&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%f&quot;</span>,&amp;salary);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n\t$%.2f a month is $%.2f a year.&quot;</span>, salary,</span><br><span class="line">    salary * <span class="number">12.0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\rGee!\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    getchar();</span><br><span class="line">    getchar();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>刷新输出</strong></p>
<p>最初，printf（）语句把输出发送到一个叫作缓冲区（buffer）的中间存储区域，然后缓冲区中的内容再不断被发送到屏幕上。C 标准明确规定了何时把缓冲区中的内容发送到屏幕：</p>
<blockquote>
<p>当缓冲区满、遇到换行字符、或需要输入的时候（从缓冲区把数据发送到屏幕或文件被称为刷新缓冲区）</p>
</blockquote>
<p><em><strong>WOW!</strong></em> <em>这我以前真的没有注意到噢！</em></p>
<hr>
<h3 id="第四章：字符串和格式化输入-x2F-输出"><a href="#第四章：字符串和格式化输入-x2F-输出" class="headerlink" title="第四章：字符串和格式化输入&#x2F;输出"></a>第四章：字符串和格式化输入&#x2F;输出</h3><h4 id="字符串简介"><a href="#字符串简介" class="headerlink" title="字符串简介"></a>字符串简介</h4><p>字符串（character string）是一个或多个字符的序列。如</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;Zing went the strings of my heart!&quot;</span></span><br></pre></td></tr></table></figure>

<p>双引号不是字符串的一部分，它仅仅是用来告知编译器它括起来的是字符串。</p>
<p><strong>char类型数组和null字符</strong></p>
<p>因为C没有专门存储字符串的变量类型，所以字符串都被存储在char类型的数组中。</p>
<p>![](E:\backup\myblog\C\C primer plus\png汇总\chapter4-1.png)</p>
<p>图4.1中数组末尾位置的字符’\0’，是空字符（null character），是C语言用来标记字符串的结束的。</p>
<p><em>空字符不是数字0，它是非打印字符，其ASCII码是（或等价于）0。</em></p>
<p>因此，比如，一个有40个存储单元的字符串，只能存储39个字符，剩下一个字节留给空字符。</p>
<p>声明方式：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> name[<span class="number">40</span>];</span><br></pre></td></tr></table></figure>



<p><strong>使用字符串</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PRAISE <span class="string">&quot;You are an extraordinary being&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span>&#123;</span><br><span class="line">    <span class="type">char</span> name[<span class="number">40</span>];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;What&#x27;s your name? &quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, name);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Hello, %s. %s\n&quot;</span>, name, PRAISE);</span><br><span class="line">    system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>PRAISE后面用双引号括起来的文本是一个字符串，编译器会在末尾自动加上空字符。</li>
<li>scanf（）在遇到第一个空白（空格、制表符或换行符）时就不再读取输入。</li>
</ol>
<p><em>字符串和字符的主要区别在于字符是基本类型，而字符串是派生类型，它是字符数组而且末尾有空字符。</em></p>
<p><strong><code>strlen()</code>函数</strong> （之后会在第11章中涉及）</p>
<ol>
<li><code>strlen()</code>包含在头文件<code>string.h</code>中，其他一些于字符串相关的函数也都包含在这个头文件中。</li>
<li><code>strlen()</code>将不会计算字符串中最后的空字符<code>\0</code>，而<code>sizeof()</code>在计算字符串大小的时候会把空字符<code>\0</code>也计算进去。</li>
</ol>
<h4 id="常量和C预处理器"><a href="#常量和C预处理器" class="headerlink" title="常量和C预处理器"></a>常量和C预处理器</h4><p>明示常量（manifest constant）&#x2F; 符号变量（symbolic constant），即在程序顶部加一行：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> NAME value</span></span><br></pre></td></tr></table></figure>

<p>编译程序时，程序中所有的NAME都会被替换成value。这一过程被称为编译时替换（compile-time substitution）（在预处理的时候就已经完成）。在运行程序时，程序中所有的替换均已完成。</p>
<p><strong>const限定符</strong></p>
<p>C90标准新增了 <code>const</code> 关键字，用于限定一个变量为只读。其声明如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> MONTHS = <span class="number">12</span>; <span class="comment">// MONTHS在程序中不可更改，值为12</span></span><br></pre></td></tr></table></figure>

<p>将在第12章讨论与const相关的内容</p>
<h4 id="printf-和scanf"><a href="#printf-和scanf" class="headerlink" title="printf()和scanf()"></a><code>printf()</code>和<code>scanf()</code></h4><h5 id="printf"><a href="#printf" class="headerlink" title="printf()"></a><code>printf()</code></h5><p>![](E:\backup\myblog\C\C primer plus\png汇总\chapter4-2.png)</p>
<p>格式为<code>printf(格式字符串, 待打印项1, 待打印项2,...);</code></p>
<p>其中格式字符串由实际要打印的字符和转换说明组成。</p>
<h5 id="printf-的转换说明修饰符"><a href="#printf-的转换说明修饰符" class="headerlink" title="printf()的转换说明修饰符"></a><code>printf()</code>的转换说明修饰符</h5><p>在%和转换字符之间插入修饰符可以修饰基本的转换说明。</p>
<p>![](E:\backup\myblog\C\C primer plus\png汇总\chapter4-3.png)</p>
<p>![](E:\backup\myblog\C\C primer plus\png汇总\chapter4-4.png)</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>C Primer Plus notes</div>
      <div>http://example.com/2022/07/13/C-Primer-Plus-notes/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>Jason_Zhu</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>July 13, 2022</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>Licensed under</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/07/13/hello-world/" title="Hello World">
                        <span class="hidden-mobile">Hello World</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;Table of Contents</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
